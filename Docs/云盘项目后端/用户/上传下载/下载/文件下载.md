# 文件下载

- 请求地址：/download/{download_id}

- 请求方式：GET

- 响应体编码：application/force-download

- 请求头：

  ```
  Authorization:登录状态Token(string)
  ```

- 流程图：

  ```mermaid
  graph TD
  start((开始))-->下载ID-->j1{查询下载信息}--失败-->返回失败-->finish((结束))
  j1--成功-->j2
  start-->Token解析-->TokenID-->j2{验证是否为同一用户}--不相同-->返回失败
  j2--相同-->j3{判断是否为单文件}--单文件-->j4{查找缓存文件}--无缓存-->创建缓存文件-->下载目标文件--单文件-->更新缓存文件下载记录-->更新文件/分享下载记录-->开始下载-->finish
  j4--有缓存-->更新缓存文件下载记录
  j3--多文件-->创建缓存目录-->下载目标文件-->将目录打包-->更新缓存文件下载记录
  ```